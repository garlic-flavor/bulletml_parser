<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C/DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja">
  <head>
    <meta http-equiv = "Content-Type" content = "text/html; charset=utf-8" />
    <meta http-equiv = "Content-Style-Type" content = "text/css" />
    <meta http-equiv = "Content-Script-Type" content = "text/javascript" />
  </head>
  <body>
    <h1>sworks.bulletml.ctbml</h1>
    <!-- Generated by Ddoc from src\sworks\bulletml\ctbml.d -->
<p class="summary-sec">Compile-Time BulletML Parser.
</p>

<span class="summary-header-sec version-sec">0.0001(dmd2.059)
</span><br />


<span class="summary-header-sec date-sec">2012-Jul-17 01:29:08
</span><br />


<span class="summary-header-sec authors-sec">KUMA
</span><br />


<span class="summary-header-sec license-sec">CC0</span><br />



<dl class="module-members-sec"><dt><span class="decl">XMLTag <span class="psymbol">parseXMLTag</span>
(ref string <span class="param">cont</span>
);
</span></dt>

<dd><p class="summary-sec">文字列を XMLTag にする。</p>


</dd>
<dt><span class="decl">struct <span class="psymbol">XMLTag</span>
;
</span></dt>

<dd><p class="summary-sec">XML 構造を表現する。</p>


<dl class="members-sec"><dt><span class="decl">string <span class="psymbol">name</span>
;
</span></dt>

<dd><p class="summary-sec">タグの名前</p>


</dd>
<dt><span class="decl">XMLAttribute[] <span class="psymbol">attributes</span>
;
</span></dt>

<dd><p class="summary-sec">属性</p>


</dd>
<dt><span class="decl">string <span class="psymbol">_text</span>
;
</span></dt>

<dd><p class="summary-sec">text</p>


</dd>
<dt><span class="decl">XMLTag[] <span class="psymbol">children</span>
;
</span></dt>

<dd><p class="summary-sec">子要素</p>


</dd>
<dt><span class="decl">string <span class="psymbol">opIndex</span>
(string <span class="param">key</span>
);
<br />
string <span class="psymbol">get</span>
(string <span class="param">key</span>
, lazy string <span class="param">def</span>
);
</span></dt>

<dd><p class="summary-sec">属性を検索する。</p>


</dd>
<dt><span class="decl">void <span class="psymbol">opIndexAssign</span>
(string <span class="param">val</span>
, string <span class="param">key</span>
);
</span></dt>

<dd><p class="summary-sec">属性を適用する。</p>


</dd>
<dt><span class="decl">@property void <span class="psymbol">text</span>
(string <span class="param">t</span>
);
<br />
const @property string <span class="psymbol">text</span>
();
</span></dt>

<dd><p class="summary-sec">文字列を設定、検索する。</p>


</dd>
</dl>

</dd>
<dt><span class="decl">struct <span class="psymbol">XMLAttribute</span>
;
</span></dt>

<dd><p class="summary-sec">XML タグの属性を格納する。</p>


</dd>
<dt><span class="decl">void <span class="psymbol">stripLeftXML</span>
(ref string <span class="param">cont</span>
);
</span></dt>

<dd><p class="summary-sec">文字列先頭から XML における、空白、コメントなどを取り除く。</p>


</dd>
<dt><span class="decl">XMLAttribute[] <span class="psymbol">parseAttribute</span>
(ref string <span class="param">cont</span>
);
</span></dt>

<dd><p class="summary-sec">「label="hello" type="vertical"&gt; ...」みたいな文字列から XMLAttribute の配列を取り出す。</p>


</dd>
<dt><span class="decl">abstract interface <span class="psymbol">IPointable</span>
;
</span></dt>

<dd><p class="summary-sec">画面に表示されるキャラクタはこれを実装すべき</p>


<dl class="members-sec"><dt><span class="decl">abstract const @property Vector2f <span class="psymbol">point</span>
();
</span></dt>

<dd><p class="summary-sec">キャラクタのグローバル座標</p>


</dd>
</dl>

</dd>
<dt><span class="decl">abstract interface <span class="psymbol">IMovable</span>
: sworks.bulletml.ctbml.IPointable;
</span></dt>

<dd><p class="summary-sec">位置を変化させるキャラクタはこれを実装すべき。</p>


<dl class="members-sec"><dt><span class="decl">float <span class="psymbol">SPEED_SCALE</span>
;
</span></dt>

<dd><p class="summary-sec">謎のマジックナンバー</p>


</dd>
<dt><span class="decl">abstract const @property float <span class="psymbol">heading</span>
();
<br />
abstract @property void <span class="psymbol">heading</span>
(float);
<br />
abstract const @property Vector2f <span class="psymbol">headingVector</span>
();
</span></dt>

<dd><p class="summary-sec">キャラクタの向き clockwise</p>


</dd>
<dt><span class="decl">abstract const @property float <span class="psymbol">speed</span>
();
<br />
abstract @property void <span class="psymbol">speed</span>
(float);
</span></dt>

<dd><p class="summary-sec">キャラクタの移動速度 1フレーム(==1/60sec) で何ピクセル進むか。</p>


</dd>
<dt><span class="decl">abstract const @property bool <span class="psymbol">isActive</span>
();
</span></dt>

<dd><p class="summary-sec">action 要素を消化しきっていない時 → <span class="dkeyword">true</span>
</p>


</dd>
<dt><span class="decl">abstract const @property bool <span class="psymbol">willVanish</span>
();
</span></dt>

<dd><p class="summary-sec">vanish() が実行されたかどうか。</p>


</dd>
<dt><span class="decl">abstract void <span class="psymbol">update</span>
(float <span class="param">term</span>
);
</span></dt>

<dd><p class="summary-sec">位置を <span class="param">term</span>
 フレーム更新する。</p>


</dd>
<dt><span class="decl">abstract void <span class="psymbol">vanish</span>
();
</span></dt>

<dd><p class="summary-sec">これが実行されると次の update で activeBullets から消える。</p>


</dd>
</dl>

</dd>
<dt><span class="decl">abstract interface <span class="psymbol">ILabelable</span>
;
</span></dt>

<dd><p class="summary-sec">名前付き</p>


<dl class="members-sec"><dt><span class="decl">abstract const @property string <span class="psymbol">label</span>
();
</span></dt>

<dd><p class="summary-sec">タグのラベル属性に対応している。</p>


</dd>
</dl>

</dd>
<dt><span class="decl">abstract interface <span class="psymbol">IPlayer</span>
: sworks.bulletml.ctbml.IPointable;
</span></dt>

<dd><p class="summary-sec">BulletML のユーザが実装する。</p>


</dd>
<dt><span class="decl">abstract interface <span class="psymbol">IActionFunc</span>
: sworks.compo.util.factory.ISlist!(IActionFunc).ISlist;
</span></dt>

<dd><p class="summary-sec">action 要素を表す。</p>


</dd>
<dt><span class="decl">abstract interface <span class="psymbol">IBullet</span>
: sworks.compo.util.factory.ISlist!(IBullet).ISlist, sworks.bulletml.ctbml.ILabelable, sworks.bulletml.ctbml._IFireController, sworks.bulletml.ctbml.IMovable, sworks.bulletml.ctbml.IPointable;
</span></dt>

<dd><p class="summary-sec">bullet 要素を表す。</p>


<dl class="members-sec"><dt><span class="decl">float <span class="psymbol">DEFAULT_SPEED</span>
;
</span></dt>

<dd><p class="summary-sec">値が指定されなかった場合の弾の速度</p>


</dd>
<dt><span class="decl">enum <span class="psymbol">TYPE</span>
;
</span></dt>

<dd><p class="summary-sec">シューターのタイプ</p>


</dd>
<dt><span class="decl">abstract @property ref ActiveIBulletsIterator <span class="psymbol">activeBullets</span>
();
</span></dt>

<dd><p class="summary-sec">現在アクティブな弾を巡回する。</p>


</dd>
<dt><span class="decl">abstract const @property bool <span class="psymbol">hasActiveBullets</span>
();
</span></dt>

<dd><p class="summary-sec">現在、アクティブな弾が存在するかどうか。</p>


</dd>
<dt><span class="decl">abstract @property IBullet <span class="psymbol">parent</span>
();
</span></dt>

<dd><p class="summary-sec">親弾</p>


</dd>
<dt><span class="decl">abstract @property BulletData <span class="psymbol">data</span>
();
</span></dt>

<dd><p class="summary-sec">ユーザ定義のデータを格納できるよ。</p>


</dd>
</dl>

</dd>
<dt><span class="decl">struct <span class="psymbol">ActiveIBulletsIterator</span>
;
</span></dt>

<dd><p class="summary-sec">IBullet とその中の アクティブな弾を巡回する。</p>


</dd>
<dt><span class="decl">class <span class="psymbol">Bullet</span>
: sworks.bulletml.ctbml.IBullet;
</span></dt>

<dd><p class="summary-sec">弾</p>


<dl class="members-sec"><dt><span class="decl">const @property string <span class="psymbol">label</span>
();
</span></dt>

<dd><p class="summary-sec">弾の名前</p>


</dd>
<dt><span class="decl">const @property Vector2f <span class="psymbol">point</span>
();
</span></dt>

<dd><p class="summary-sec">弾の位置(グローバル座標)</p>


</dd>
<dt><span class="decl">const @property float <span class="psymbol">heading</span>
();
<br />
@property void <span class="psymbol">heading</span>
(float <span class="param">h</span>
);
<br />
const @property Vector2f <span class="psymbol">headingVector</span>
();
</span></dt>

<dd><p class="summary-sec">弾の向き</p>


</dd>
<dt><span class="decl">const @property float <span class="psymbol">speed</span>
();
<br />
@property void <span class="psymbol">speed</span>
(float <span class="param">s</span>
);
</span></dt>

<dd><p class="summary-sec">弾の速度</p>


</dd>
<dt><span class="decl">@property IPlayer <span class="psymbol">player</span>
();
</span></dt>

<dd><p class="summary-sec">この弾が狙っているプレイヤ</p>


</dd>
<dt><span class="decl">const @property bool <span class="psymbol">isActive</span>
();
</span></dt>

<dd><p class="summary-sec">action 要素を消化しきっている → <span class="dkeyword">false</span>
</p>


</dd>
<dt><span class="decl">void <span class="psymbol">update</span>
(float <span class="param">term</span>
);
</span></dt>

<dd><p class="summary-sec">この弾と、この弾から発射された弾を <span class="param">term</span>
 フレーム分更新する。<br />

 vanish が実行され、子孫の弾も持たない子の弾は activeBullets から取り除かれる。</p>


</dd>
<dt><span class="decl">void <span class="psymbol">vanish</span>
();
</span></dt>

<dd><p class="summary-sec">弾を消す。この弾の親の次の update 時の巡回で activeBullets から消える。</p>


</dd>
<dt><span class="decl">const @property bool <span class="psymbol">willVanish</span>
();
</span></dt>

<dd><p class="summary-sec">vanish() が呼び出されたかどうか。</p>


</dd>
<dt><span class="decl">const @property bool <span class="psymbol">hasActiveBullets</span>
();
</span></dt>

<dd><p class="summary-sec">アクティブ(表示すべき)弾があるかどうか。</p>


</dd>
<dt><span class="decl">@property ref ActiveIBulletsIterator <span class="psymbol">activeBullets</span>
();
</span></dt>

<dd><p class="summary-sec">アクティブな弾を巡回する。</p>


</dd>
</dl>

</dd>
<dt><span class="decl">class <span class="psymbol">BulletML</span>
(string filename): Bullet;
</span></dt>

<dd><p class="summary-sec"><span class="psymbol">BulletML</span>
 ファイルの最外殻を表す。<br />

 bulletml 要素直下のラベル付き要素に対応した初期化関数が定義されている。<br />

 例えば、<br />

 &lt;action label="top"&gt; ... &lt;/action&gt;<br />

 ならば、<br />

 <span class="psymbol">BulletML</span>
.Action_top で参照できる。<br />

 同様に、<br />

 <span class="psymbol">BulletML</span>
.Bullet_missile<br />

 <span class="psymbol">BulletML</span>
.Fire_aim1<br />

 の様に要素を参照することが出来る。</p>


</dd>
<dt><span class="decl">class <span class="psymbol">Action</span>
: sworks.bulletml.ctbml.IActionFunc;
</span></dt>

<dd><p class="summary-sec">action 要素を表す。</p>


<dl class="members-sec"><dt><span class="decl">const @property string <span class="psymbol">label</span>
();
</span></dt>

<dd><p class="summary-sec">名前</p>


</dd>
<dt><span class="decl">bool <span class="psymbol">update</span>
(ref float <span class="param">term</span>
);
</span></dt>

<dd><p class="summary-sec"><span class="param">term</span>
 フレーム分更新する。</p>


</dd>
</dl>

</dd>
<dt><span class="decl">bool <span class="psymbol">update_all</span>
(ref IActionFunc <span class="param">act</span>
, ref float <span class="param">term</span>
);
</span></dt>

<dd><p class="summary-sec">アクションを順に更新する。</p>


</dd>
<dt><span class="decl">bool <span class="psymbol">update_parallel</span>
(ref IActionFunc <span class="param">act</span>
, ref float <span class="param">term</span>
);
</span></dt>

<dd><p class="summary-sec">複数のアクションを同時進行で更新する。</p>


</dd>
<dt><span class="decl">struct <span class="psymbol">Direction</span>
;
</span></dt>

<dd><p class="summary-sec">方向を示す。画面上向きを 0°として時計回りに 360°で一周を表す。</p>


<dl class="members-sec"><dt><span class="decl">enum <span class="psymbol">TYPE</span>
;
</span></dt>

<dd><p class="summary-sec">狙い方</p>


</dd>
<dt><span class="decl">TYPE <span class="psymbol">type</span>
;
</span></dt>

<dd><br />
<br />

</dd>
<dt><span class="decl">float <span class="psymbol">dir</span>
;
</span></dt>

<dd><p class="summary-sec">360 degree clockwise</p>


</dd>
</dl>

</dd>
<dt><span class="decl">struct <span class="psymbol">Speed</span>
;
</span></dt>

<dd><p class="summary-sec">速度を表す。1フレームで移動するピクセル数で表されている(と思われる。)l</p>


<dl class="members-sec"><dt><span class="decl">float <span class="psymbol">speed</span>
;
</span></dt>

<dd><p class="summary-sec">pixels per frame</p>


</dd>
</dl>

</dd>
<dt><span class="decl">class <span class="psymbol">Fire</span>
: sworks.bulletml.ctbml.IActionFunc;
</span></dt>

<dd><p class="summary-sec"><span class="psymbol">Fire</span>
 要素を表す。Bullet を打ち出す。</p>


<dl class="members-sec"><dt><span class="decl">string <span class="psymbol">_label</span>
;
</span></dt>

<dd><p class="summary-sec">label 属性</p>


</dd>
<dt><span class="decl">const @property string <span class="psymbol">label</span>
();
</span></dt>

<dd><p class="summary-sec">名前</p>


</dd>
<dt><span class="decl">bool <span class="psymbol">update</span>
(ref float <span class="param">term</span>
);
</span></dt>

<dd><p class="summary-sec">Bullet を打ち出す。</p>


</dd>
</dl>

</dd>
<dt><span class="decl">class <span class="psymbol">Repeat</span>
: sworks.bulletml.ctbml.IActionFunc;
</span></dt>

<dd><p class="summary-sec">繰り返し</p>


<dl class="members-sec"><dt><span class="decl">bool <span class="psymbol">update</span>
(ref float <span class="param">term</span>
);
</span></dt>

<dd><p class="summary-sec"><span class="param">term</span>
 フレーム更新する。</p>


</dd>
</dl>

</dd>
<dt><span class="decl">class <span class="psymbol">Wait</span>
: sworks.bulletml.ctbml.IActionFunc;
</span></dt>

<dd><p class="summary-sec">フレーム数を指定して、その分待つ。</p>


</dd>
<dt><span class="decl">class <span class="psymbol">ChangeDirection</span>
: sworks.bulletml.ctbml.IActionFunc;
</span></dt>

<dd><p class="summary-sec">弾の方向を変える。</p>


<dl class="members-sec"><dt><span class="decl">bool <span class="psymbol">update</span>
(ref float <span class="param">term</span>
);
</span></dt>

<dd><p class="summary-sec"><span class="param">term</span>
 フレーム更新する。</p>


</dd>
</dl>

</dd>
<dt><span class="decl">class <span class="psymbol">Vanish</span>
: sworks.bulletml.ctbml.IActionFunc;
</span></dt>

<dd><p class="summary-sec">弾を消す。(vanish() を実行する。)</p>


<dl class="members-sec"><dt><span class="decl">bool <span class="psymbol">update</span>
(ref float <span class="param">term</span>
);
</span></dt>

<dd><p class="summary-sec">vanish() を実行する。</p>


</dd>
</dl>

</dd>
<dt><span class="decl">class <span class="psymbol">ChangeSpeed</span>
: sworks.bulletml.ctbml.IActionFunc;
</span></dt>

<dd><p class="summary-sec">弾の速度を変える。</p>


</dd>
<dt><span class="decl">class <span class="psymbol">Accel</span>
: sworks.bulletml.ctbml.IActionFunc;
</span></dt>

<dd><p class="summary-sec">X(Y)軸方向に加速する。</p>


<dl class="members-sec"><dt><span class="decl">bool <span class="psymbol">update</span>
(ref float <span class="param">term</span>
);
</span></dt>

<dd><br />
<br />

</dd>
</dl>

</dd>
<dt><span class="decl">class <span class="psymbol">ActionRef</span>
: sworks.bulletml.ctbml.IActionFunc;
</span></dt>

<dd><p class="summary-sec">action を参照する。循環参照によるオーバーフローを軽減する為にワンクッションおく。</p>


<dl class="members-sec"><dt><span class="decl">bool <span class="psymbol">update</span>
(ref float <span class="param">term</span>
);
</span></dt>

<dd><br />
<br />

</dd>
</dl>

</dd>
<dt><span class="decl">struct <span class="psymbol">SlistIterator</span>
(TYPE);
</span></dt>

<dd><p class="summary-sec">sworks.compo.util.factory.ISlist を巡回する。</p>


</dd>
<dt><span class="decl">SlistIterator!(TYPE) <span class="psymbol">iterator</span>
(TYPE)(ref TYPE <span class="param">t</span>
);
</span></dt>

<dd><p class="summary-sec">suger</p>


</dd>
<dt><span class="decl">struct <span class="psymbol">RefParam</span>
;
</span></dt>

<dd><p class="summary-sec">設定されていない引数は 0f が返る。</p>


<dl class="members-sec"><dt><span class="decl">float[] <span class="psymbol">_val</span>
;
</span></dt>

<dd><p class="summary-sec">val[0] == rank</p>


</dd>
</dl>

</dd>
<dt><span class="decl">struct <span class="psymbol">Bank</span>
(TYPE) if (is(TYPE == class) || is(TYPE == interface));
</span></dt>

<dd><p class="summary-sec">sworks.compo.util.factory.Slist を溜める。</p>


</dd>
<dt><span class="decl">class <span class="psymbol">BMLTest</span>
: sworks.bulletml.ctbml.IPlayer;
</span></dt>

<dd><p class="summary-sec">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\\\\\\\\\\\\\\\\\\\
                                                                        \\\\
                                 DEBUG                                  \\\\
                                                                        \\\\
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\\\\\\\\\\\\\\\\\\\</p>


</dd>
<dt><span class="decl">void <span class="psymbol">main</span>
();
</span></dt>

<dd><p class="summary-sec">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\\\\\\\\\\\\\\\\\\\
                                                                        \\\\
                                 DEBUG                                  \\\\
                                                                        \\\\
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\\\\\\\\\\\\\\\\\\\</p>


</dd>
<dt><span class="decl">class <span class="psymbol">MyBulletData</span>
: sworks.bulletml.ctbml.BulletData;
</span></dt>

<dd><p class="summary-sec">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\\\\\\\\\\\\\\\\\\\
                                                                        \\\\
                                 DEBUG                                  \\\\
                                                                        \\\\
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\\\\\\\\\\\\\\\\\\\</p>


</dd>
<dt><span class="decl">struct <span class="psymbol">BulletMLIterator</span>
;
</span></dt>

<dd><p class="summary-sec">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\\\\\\\\\\\\\\\\\\\
                                                                        \\\\
                                 DEBUG                                  \\\\
                                                                        \\\\
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\\\\\\\\\\\\\\\\\\\</p>


</dd>
<dt><span class="decl">class <span class="psymbol">Drawer</span>
;
</span></dt>

<dd><p class="summary-sec">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\\\\\\\\\\\\\\\\\\\
                                                                        \\\\
                                 DEBUG                                  \\\\
                                                                        \\\\
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\\\\\\\\\\\\\\\\\\\</p>


</dd>
<dt><span class="decl">class <span class="psymbol">PlaneDrawer</span>
;
</span></dt>

<dd><p class="summary-sec">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\\\\\\\\\\\\\\\\\\\
                                                                        \\\\
                                 DEBUG                                  \\\\
                                                                        \\\\
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\\\\\\\\\\\\\\\\\\\</p>


</dd>
<dt><span class="decl">class <span class="psymbol">CannonDrawer</span>
;
</span></dt>

<dd><p class="summary-sec">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\\\\\\\\\\\\\\\\\\\
                                                                        \\\\
                                 DEBUG                                  \\\\
                                                                        \\\\
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\\\\\\\\\\\\\\\\\\\</p>


</dd>
<dt><span class="decl">class <span class="psymbol">BulletsDrawer</span>
;
</span></dt>

<dd><p class="summary-sec">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\\\\\\\\\\\\\\\\\\\
                                                                        \\\\
                                 DEBUG                                  \\\\
                                                                        \\\\
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\\\\\\\\\\\\\\\\\\\</p>


</dd>
<dt><span class="decl">class <span class="psymbol">SmokeManager</span>
;
</span></dt>

<dd><p class="summary-sec">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\\\\\\\\\\\\\\\\\\\
                                                                        \\\\
                                 DEBUG                                  \\\\
                                                                        \\\\
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\\\\\\\\\\\\\\\\\\\</p>


</dd>
<dt><span class="decl">class <span class="psymbol">RedSmoke</span>
: sworks.compo.util.factory.ISlist!(RedSmoke).ISlist;
</span></dt>

<dd><p class="summary-sec">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\\\\\\\\\\\\\\\\\\\
                                                                        \\\\
                                 DEBUG                                  \\\\
                                                                        \\\\
XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\\\\\\\\\\\\\\\\\\\\</p>


</dd>
</dl>


  </body>
</html>

